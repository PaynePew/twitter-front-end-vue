{"version":3,"sources":["webpack:///./src/views/LogIn.vue?97f1","webpack:///./src/apis/authorization.js","webpack:///./src/views/LogIn.vue","webpack:///./src/components/LoginForm.vue","webpack:///./src/components/LoginForm.vue?c543","webpack:///./src/views/LogIn.vue?eab5","webpack:///./src/apis/admin.js","webpack:///./src/components/LoginForm.vue?8d35"],"names":["signIn","account","password","apiHelper","post","signUp","name","email","checkPassword","class","src","alt","isRouterAdmin","for","handleSubmit","id","type","required","autofocus","autocomplete","to","data","isProcessing","adminToggled","isNotice","computed","currentURL","this","$route","methods","Error","admin","response","status","message","user","role","$store","commit","$router","push","localStorage","setItem","token","dispatch","authorization","console","log","__exports__","components","LoginForm","render","articles","getAll","get","delete","tweetId","getUsers"],"mappings":"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","file":"js/chunk-6e03ca1a.661c7d3c.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./LogIn.vue?vue&type=style&index=0&id=b94679b4&lang=scss&scoped=true\"","import { apiHelper } from \"../utils/helpers\";\n\nexport default {\n  //TODO 登入資料api待修正 account,password\n  signIn({ account, password }) {\n    return apiHelper.post(\"/users/signin\", {\n      account,\n      password,\n    });\n  },\n  signUp({ name, account, email, password, checkPassword }) {\n    return apiHelper.post(\"/users\", {\n      name,\n      account,\n      email,\n      password,\n      checkPassword,\n    });\n  },\n};\n","<template>\n  <div class=\"login__container\">\n    <img class=\"login__logo\" src=\"./../assets/img/logo@2x.png\" alt=\"\" />\n    <h1 class=\"login__title\">\n      {{ isRouterAdmin ? \"後台登入\" : \"登入 Alphitter\" }}\n    </h1>\n    <LoginForm />\n  </div>\n</template>\n\n<script>\nimport LoginForm from \"./../components/LoginForm.vue\";\n\nexport default {\n  name: \"Login\",\n  components: {\n    LoginForm,\n  },\n\n  computed: {\n    isRouterAdmin() {\n      const currentURL = this.$route.name;\n      if (currentURL === \"AdminLogin\") {\n        return true;\n      }\n      return false;\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.login {\n  &__container {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n  }\n  &__logo {\n    margin-top: 60px;\n    width: 40px;\n    height: 40px;\n  }\n  &__title {\n    font-size: $fs-h1;\n    margin-top: 20px;\n    margin-bottom: 10px;\n    line-height: 33.3px;\n  }\n}\n</style>\n","<template>\n  <form @submit.stop.prevent=\"handleSubmit\">\n    <div class=\"login-form__input-box form__input-box\">\n      <label class=\"form__label\" for=\"account\">帳號</label>\n      <div class=\"login-form__input-container form__input-container\">\n        <input\n          id=\"account\"\n          v-model=\"account\"\n          name=\"account\"\n          type=\"account\"\n          class=\"login-form__input form__input\"\n          required\n          autofocus\n        />\n      </div>\n    </div>\n\n    <div class=\"login-form__input-box form__input-box\">\n      <label class=\"form__label\" for=\"password\">密碼</label>\n      <div class=\"login-form__input-container form__input-container\">\n        <input\n          id=\"password\"\n          v-model=\"password\"\n          name=\"password\"\n          type=\"password\"\n          class=\"login-form__input form__input\"\n          required\n          autocomplete\n        />\n      </div>\n    </div>\n\n    <button class=\"login-form__btn btn\">登入</button>\n\n    <div class=\"login-form__btn--small btn--small\">\n      <template v-if=\"!isRouterAdmin\">\n        <router-link to=\"/signup\" class=\"btn--small__text\">\n          註冊Alphitter\n        </router-link>\n        <span> · </span>\n      </template>\n      <router-link\n        v-if=\"!isRouterAdmin\"\n        class=\"btn--small__text\"\n        to=\"/admin/login\"\n      >\n        後台登入\n      </router-link>\n      <router-link v-if=\"isRouterAdmin\" class=\"btn--small__text\" to=\"/login\">\n        前台登入\n      </router-link>\n    </div>\n  </form>\n</template>\n\n<script>\nimport authorizationAPI from \"./../apis/authorization\";\nimport adminAPI from \"./../apis/admin\";\n\nexport default {\n  name: \"LoginForm\",\n  data() {\n    return {\n      account: \"\",\n      password: \"\",\n      isProcessing: false,\n      adminToggled: false,\n      isNotice: false,\n      // notice: {\n      //   type: \"\",\n      //   message: \"\",\n      // },\n    };\n  },\n\n  computed: {\n    isRouterAdmin() {\n      const currentURL = this.$route.name;\n      if (currentURL === \"AdminLogin\") {\n        return true;\n      }\n      return false;\n    },\n  },\n  methods: {\n    async handleSubmit() {\n      try {\n        if (!this.account) {\n          throw new Error(\"請輸入帳號\");\n        }\n\n        if (!this.password) {\n          throw new Error(\"請輸入密碼\");\n        }\n\n        this.isProcessing = true;\n\n        if (this.isRouterAdmin) {\n          //若isRouterAdmin則為後台登入\n          const response = await adminAPI.signIn({\n            account: this.account,\n            password: this.password,\n          });\n\n          const { data } = response;\n\n          if (data.status !== \"success\") {\n            throw new Error(data.message);\n          }\n\n          if (data.user.role !== \"admin\") {\n            //阻擋前台帳號登入後台\n            this.$store.commit(\"authentication/revokeAuthentication\");\n            this.$router.push(\"/login\");\n            this.$store.commit(\"noticeInfo/toggleNotice\", {\n              type: \"error\",\n              message: \"帳號不存在\",\n            });\n            this.isProcessing = false;\n            return;\n          }\n          localStorage.setItem(\"token\", data.token);\n          this.$store.commit(\"authentication/setCurrentUser\", data.user);\n          this.$store.dispatch(\"authentication/fetchCurrentUser\");\n          this.$router.push(\"/admin/users\");\n        } else {\n          //否則為前台登入\n          const response = await authorizationAPI.signIn({\n            account: this.account,\n            password: this.password,\n          });\n          const { data } = response;\n          if (data.status !== \"success\") {\n            throw new Error(data.message);\n          }\n          if (data.user.role === \"admin\") {\n            //阻擋後台帳號登入前台\n            this.$store.commit(\"authentication/revokeAuthentication\");\n            this.$router.push(\"/login\");\n            this.$store.commit(\"noticeInfo/toggleNotice\", {\n              type: \"error\",\n              message: \"帳號不存在\",\n            });\n            this.isProcessing = false;\n            return;\n          }\n          localStorage.setItem(\"token\", data.token);\n          this.$store.commit(\"authentication/setCurrentUser\", data.user);\n          this.$store.dispatch(\"authentication/fetchCurrentUser\");\n          this.$router.push(\"/home\");\n        }\n      } catch (error) {\n        console.log(\"LoginForm handleSubmit error: \", error);\n        this.$store.commit(\"noticeInfo/toggleNotice\", {\n          type: \"error\",\n          message: \"帳號不存在\",\n        });\n        this.isProcessing = false;\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"./../assets/scss/components/_form.scss\";\n@import \"./../assets/scss/components/_button.scss\";\n\n.login-form {\n  &__btn {\n    width: 540px;\n    height: 46px;\n    margin-top: 40px;\n    &--small {\n      margin-top: 20px;\n    }\n  }\n}\n</style>\n","import { render } from \"./LoginForm.vue?vue&type=template&id=8ea5cdb8&scoped=true\"\nimport script from \"./LoginForm.vue?vue&type=script&lang=js\"\nexport * from \"./LoginForm.vue?vue&type=script&lang=js\"\n\nimport \"./LoginForm.vue?vue&type=style&index=0&id=8ea5cdb8&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\Work\\\\AlphaCamp\\\\Lecture-3\\\\twitter\\\\twitter-front-end-vue\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-8ea5cdb8\"]])\n\nexport default __exports__","import { render } from \"./LogIn.vue?vue&type=template&id=b94679b4&scoped=true\"\nimport script from \"./LogIn.vue?vue&type=script&lang=js\"\nexport * from \"./LogIn.vue?vue&type=script&lang=js\"\n\nimport \"./LogIn.vue?vue&type=style&index=0&id=b94679b4&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\Work\\\\AlphaCamp\\\\Lecture-3\\\\twitter\\\\twitter-front-end-vue\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-b94679b4\"]])\n\nexport default __exports__","import { apiHelper } from \"../utils/helpers\";\n\nexport default {\n  signIn({ account, password }) {\n    return apiHelper.post(\"/admin/signin\", {\n      account,\n      password,\n    });\n  },\n  articles: {\n    getAll() {\n      return apiHelper.get(\"admin/tweets\");\n    },\n    delete({ tweetId }) {\n      return apiHelper.delete(`admin/tweets/${tweetId}`);\n    },\n  },\n  getUsers() {\n    return apiHelper.get(\"admin/users\");\n  },\n};\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./LoginForm.vue?vue&type=style&index=0&id=8ea5cdb8&lang=scss&scoped=true\""],"sourceRoot":""}