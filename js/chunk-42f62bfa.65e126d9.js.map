{"version":3,"sources":["webpack:///./src/components/AccountForm.vue?4abe","webpack:///./src/apis/authorization.js","webpack:///./src/components/AccountForm.vue","webpack:///./src/components/AccountForm.vue?572f","webpack:///./src/views/UserSetting.vue","webpack:///./src/views/UserSetting.vue?7dd7"],"names":["signIn","account","password","apiHelper","post","signUp","name","email","checkPassword","class","for","type","handleSubmit","id","required","focus","accountLength","nameLength","autocomplete","$route","to","props","initialUser","Object","default","data","isProcessing","adminToggled","computed","this","length","watch","newValue","methods","Error","authorization","status","message","$router","push","users","update","$store","commit","params","userId","__exports__","render","currentUser","components","AccountForm","AppBar","introduction","avatar","cover","role","mounted","fetchUser","getCurrentUser","user","console","log"],"mappings":"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","file":"js/chunk-42f62bfa.65e126d9.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./AccountForm.vue?vue&type=style&index=0&id=6f0dd978&lang=scss&scoped=true\"","import { apiHelper } from \"../utils/helpers\";\n\nexport default {\n  //TODO 登入資料api待修正 account,password\n  signIn({ account, password }) {\n    return apiHelper.post(\"/users/signin\", {\n      account,\n      password,\n    });\n  },\n  signUp({ name, account, email, password, checkPassword }) {\n    return apiHelper.post(\"/users\", {\n      name,\n      account,\n      email,\n      password,\n      checkPassword,\n    });\n  },\n};\n","<template>\n  <form\n    @submit.stop.prevent=\"handleSubmit\"\n    class=\"account-form__form\"\n    :class=\"[\n      { 'account-form__form--setting': $route.name == 'SettingAccount' },\n    ]\"\n  >\n    <div\n      class=\"account-form__input-box form__input-box\"\n      :class=\"[\n        { 'account-form__input-box--setting': $route.name == 'SettingAccount' },\n      ]\"\n    >\n      <label class=\"form__label\" for=\"account\">帳號</label>\n      <div class=\"account-form__input-container form__input-container\">\n        <input\n          id=\"account\"\n          v-model=\"account\"\n          name=\"account\"\n          type=\"text\"\n          class=\"account-form__input form__input\"\n          required\n          @focus=\"focus = 'account'\"\n          @blur=\"focus = null\"\n        />\n      </div>\n      <div class=\"form__hint\">\n        <p class=\"form__error-message\" v-if=\"accountLength > 50\">\n          字數超出上限！\n        </p>\n        <p class=\"form__counter\" v-show=\"focus === 'account'\">\n          {{ 0 || accountLength }}/50\n        </p>\n      </div>\n    </div>\n\n    <div\n      class=\"account-form__input-box form__input-box\"\n      :class=\"[\n        { 'account-form__input-box--setting': $route.name == 'SettingAccount' },\n      ]\"\n    >\n      <label class=\"form__label\" for=\"name\">名稱</label>\n      <div class=\"account-form__input-container form__input-container\">\n        <input\n          id=\"name\"\n          v-model=\"name\"\n          name=\"name\"\n          type=\"text\"\n          class=\"account-form__input form__input\"\n          required\n          @focus=\"focus = 'name'\"\n          @blur=\"focus = null\"\n        />\n      </div>\n      <div class=\"form__hint\">\n        <p class=\"form__error-message\" v-if=\"nameLength > 50\">字數超出上限！</p>\n        <p class=\"form__counter\" v-show=\"focus === 'name'\">\n          {{ 0 || nameLength }}/50\n        </p>\n      </div>\n    </div>\n\n    <div\n      class=\"account-form__input-box form__input-box\"\n      :class=\"[\n        { 'account-form__input-box--setting': $route.name == 'SettingAccount' },\n      ]\"\n    >\n      <label class=\"form__label\" for=\"email\">email</label>\n      <div class=\"account-form__input-container form__input-container\">\n        <input\n          id=\"email\"\n          v-model=\"email\"\n          name=\"email\"\n          type=\"email\"\n          class=\"account-form__input form__input\"\n          required\n        />\n      </div>\n    </div>\n\n    <div\n      class=\"account-form__input-box form__input-box\"\n      :class=\"[\n        { 'account-form__input-box--setting': $route.name == 'SettingAccount' },\n      ]\"\n    >\n      <label class=\"form__label\" for=\"password\">密碼</label>\n      <div class=\"account-form__input-container form__input-container\">\n        <input\n          id=\"password\"\n          v-model=\"password\"\n          name=\"password\"\n          type=\"password\"\n          class=\"account-form__input form__input\"\n          required\n          autocomplete\n        />\n      </div>\n    </div>\n\n    <div\n      class=\"account-form__input-box form__input-box\"\n      :class=\"[\n        { 'account-form__input-box--setting': $route.name == 'SettingAccount' },\n      ]\"\n    >\n      <label class=\"form__label\" for=\"checkPassword\">密碼確認</label>\n      <div class=\"account-form__input-container form__input-container\">\n        <input\n          id=\"checkPassword\"\n          v-model=\"checkPassword\"\n          name=\"checkPassword\"\n          type=\"password\"\n          class=\"account-form__input form__input\"\n          required\n          autocomplete\n        />\n      </div>\n      <div class=\"form__hint\">\n        <p\n          class=\"form__error-message\"\n          v-if=\"checkPassword && password !== checkPassword\"\n        >\n          兩組密碼不相符\n        </p>\n      </div>\n    </div>\n\n    <div v-if=\"this.$route.name === 'Signup'\">\n      <button type=\"submit\" class=\"account-form__btn btn btn--primary\">\n        註冊\n      </button>\n\n      <div class=\"account-form__btn--small btn--small\">\n        <router-link to=\"/login\" class=\"btn--small__text\">取消</router-link>\n      </div>\n    </div>\n\n    <div\n      class=\"account-form__btn-wrapper\"\n      v-if=\"this.$route.name === 'SettingAccount'\"\n    >\n      <button type=\"submit\" class=\"account-form__btn--setting btn btn--primary\">\n        儲存\n      </button>\n    </div>\n  </form>\n</template>\n\n<script>\nimport authorizationAPI from \"./../apis/authorization\";\nimport usersAPI from \"./../apis/users\";\n\nexport default {\n  name: \"AccountForm\",\n\n  props: {\n    initialUser: {\n      type: Object,\n      default: () => ({\n        account: null,\n        name: \"\",\n        email: \"\",\n        password: \"\",\n        checkPassword: \"\",\n      }),\n    },\n  },\n\n  data() {\n    return {\n      account: \"\",\n      name: \"\",\n      email: \"\",\n      password: \"\",\n      checkPassword: \"\",\n      isProcessing: false,\n      adminToggled: false,\n      focus: null,\n    };\n  },\n\n  computed: {\n    accountLength() {\n      return this.account.length;\n    },\n\n    nameLength() {\n      return this.name.length;\n    },\n  },\n\n  watch: {\n    initialUser(newValue) {\n      this.account = newValue.account;\n      this.name = newValue.name;\n      this.email = newValue.email;\n    },\n  },\n\n  methods: {\n    async handleSubmit() {\n      try {\n        // 前端驗證\n        if (!this.account) {\n          throw new Error(\"請輸入帳號\");\n        }\n\n        if (this.account.length > 50) {\n          throw new Error(\"帳號長度上限50字\");\n        }\n\n        if (!this.name) {\n          throw new Error(\"請輸入名稱\");\n        }\n\n        if (this.name.length > 50) {\n          throw new Error(\"名稱長度上限50字\");\n        }\n\n        if (!this.email) {\n          throw new Error(\"請輸入email\");\n        }\n\n        if (!this.password) {\n          throw new Error(\"請輸入密碼\");\n        }\n\n        if (!this.checkPassword) {\n          throw new Error(\"請輸入密碼確認\");\n        }\n\n        if (this.password !== this.checkPassword) {\n          throw new Error(\"兩次輸入密碼不同，請重新確認\");\n        }\n\n        //前端驗證完成 開始打api\n        this.isProcessing = true;\n\n        if (this.$route.name === \"Signup\") {\n          //若router為signup為註冊\n          const { data } = await authorizationAPI.signUp({\n            id: this.initialUser.id,\n            name: this.name,\n            account: this.account,\n            email: this.email,\n            password: this.password,\n            checkPassword: this.checkPassword,\n          });\n\n          if (data.status !== \"success\") {\n            throw new Error(data.message);\n          }\n\n          this.$router.push({\n            name: \"Login\",\n          });\n        } else {\n          //若router不為signup為更新資料\n          const { data } = await usersAPI.account.update({\n            id: this.initialUser.id,\n            name: this.name,\n            account: this.account,\n            email: this.email,\n            password: this.password,\n            checkPassword: this.checkPassword,\n          });\n\n          if (data.status !== \"success\") {\n            throw new Error(data.message);\n          }\n\n          this.$store.commit(\"noticeInfo/toggleNotice\", {\n            type: \"success\",\n            message: \"成功編輯帳號資料\",\n          });\n\n          this.$router.push({\n            name: \"UserInfo\",\n            params: { userId: this.initialUser.id },\n          });\n        }\n      } catch (error) {\n        this.$store.commit(\"noticeInfo/toggleNotice\", {\n          type: \"error\",\n          message: error.message,\n        });\n        this.isProcessing = false;\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"./../assets/scss/components/_form.scss\";\n@import \"./../assets/scss/components/_button-share.scss\";\n\n.account-form {\n  &__form {\n    padding: 0 16px;\n    &--setting {\n      width: 642px;\n    }\n  }\n  &__input-box {\n    &--setting {\n      width: 642px;\n    }\n  }\n  &__btn {\n    width: 540px;\n    height: 46px;\n    margin-top: 40px;\n    cursor: pointer;\n    &--small {\n      display: flex;\n      justify-content: center;\n      margin-top: 20px;\n    }\n    &--setting {\n      margin-top: 40px;\n      width: 116px;\n      height: 46px;\n      cursor: pointer;\n    }\n  }\n  &__btn-wrapper {\n    display: flex;\n    justify-content: flex-end;\n  }\n}\n</style>\n","import { render } from \"./AccountForm.vue?vue&type=template&id=6f0dd978&scoped=true\"\nimport script from \"./AccountForm.vue?vue&type=script&lang=js\"\nexport * from \"./AccountForm.vue?vue&type=script&lang=js\"\n\nimport \"./AccountForm.vue?vue&type=style&index=0&id=6f0dd978&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\Work\\\\AlphaCamp\\\\Lecture-3\\\\twitter\\\\twitter-front-end-vue\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6f0dd978\"]])\n\nexport default __exports__","<template>\n  <AppBar :status=\"'帳戶設定'\" />\n  <AccountForm :initialUser=\"currentUser\" />\n</template>\n\n<script>\nimport AppBar from \"./../components/AppBar.vue\";\nimport AccountForm from \"./../components/AccountForm.vue\";\nimport usersAPI from \"./../apis/users\";\n\nexport default {\n  name: \"UserSetting\",\n  components: {\n    AccountForm,\n    AppBar,\n  },\n  data() {\n    return {\n      currentUser: {\n        id: -1,\n        account: \"\",\n        email: \"\",\n        password: \"\",\n        name: \"\",\n        introduction: \"\",\n        avatar: \"\",\n        cover: \"\",\n        role: \"\",\n      },\n    };\n  },\n\n  mounted() {\n    this.fetchUser();\n  },\n\n  methods: {\n    async fetchUser() {\n      try {\n        const { data } = await usersAPI.getCurrentUser();\n\n        const { id, account, name, email } = data.user;\n\n        this.currentUser = {\n          ...this.currentUser,\n          id,\n          account,\n          name,\n          email,\n        };\n      } catch (error) {\n        console.log(error);\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped></style>\n","import { render } from \"./UserSetting.vue?vue&type=template&id=1a9000ee\"\nimport script from \"./UserSetting.vue?vue&type=script&lang=js\"\nexport * from \"./UserSetting.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\Work\\\\AlphaCamp\\\\Lecture-3\\\\twitter\\\\twitter-front-end-vue\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}